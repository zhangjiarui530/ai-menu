"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze-menu/route";
exports.ids = ["app/api/analyze-menu/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-menu%2Froute&page=%2Fapi%2Fanalyze-menu%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-menu%2Froute.ts&appDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-menu%2Froute&page=%2Fapi%2Fanalyze-menu%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-menu%2Froute.ts&appDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_Intel_Desktop_Dase2025_4_OpenTeacherAssistant_cursor_ai_menu_generator_app_api_analyze_menu_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analyze-menu/route.ts */ \"(rsc)/./app/api/analyze-menu/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze-menu/route\",\n        pathname: \"/api/analyze-menu\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze-menu/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Intel\\\\Desktop\\\\Dase2025\\\\4_OpenTeacherAssistant\\\\cursor\\\\ai-menu-generator\\\\app\\\\api\\\\analyze-menu\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Intel_Desktop_Dase2025_4_OpenTeacherAssistant_cursor_ai_menu_generator_app_api_analyze_menu_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze-menu/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxMy41LjdfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplLW1lbnUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFuYWx5emUtbWVudSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFuYWx5emUtbWVudSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNJbnRlbCU1Q0Rlc2t0b3AlNUNEYXNlMjAyNSU1QzRfT3BlblRlYWNoZXJBc3Npc3RhbnQlNUNjdXJzb3IlNUNhaS1tZW51LWdlbmVyYXRvciU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDSW50ZWwlNUNEZXNrdG9wJTVDRGFzZTIwMjUlNUM0X09wZW5UZWFjaGVyQXNzaXN0YW50JTVDY3Vyc29yJTVDYWktbWVudS1nZW5lcmF0b3ImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDc0Q7QUFDdkM7QUFDc0Y7QUFDcko7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLz9iNzA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIm5leHQvZGlzdC9zZXJ2ZXIvbm9kZS1wb2x5ZmlsbC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxJbnRlbFxcXFxEZXNrdG9wXFxcXERhc2UyMDI1XFxcXDRfT3BlblRlYWNoZXJBc3Npc3RhbnRcXFxcY3Vyc29yXFxcXGFpLW1lbnUtZ2VuZXJhdG9yXFxcXGFwcFxcXFxhcGlcXFxcYW5hbHl6ZS1tZW51XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplLW1lbnUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXplLW1lbnVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FuYWx5emUtbWVudS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEludGVsXFxcXERlc2t0b3BcXFxcRGFzZTIwMjVcXFxcNF9PcGVuVGVhY2hlckFzc2lzdGFudFxcXFxjdXJzb3JcXFxcYWktbWVudS1nZW5lcmF0b3JcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplLW1lbnVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl6ZS1tZW51L3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-menu%2Froute&page=%2Fapi%2Fanalyze-menu%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-menu%2Froute.ts&appDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze-menu/route.ts":
/*!***************************************!*\
  !*** ./app/api/analyze-menu/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.23.8/node_modules/zod/lib/index.mjs\");\n\n\nconst ZHIPU_API_KEY = process.env.ZHIPU_API_KEY;\nconst API_URL = \"https://open.bigmodel.cn/api/paas/v4/chat/completions\";\n// 定义菜品schema\nconst menuAnalysisSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    dishes: zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        price: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        description: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        mainIngredient: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        cuisineType: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        spicinessLevel: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        isSignatureDish: zod__WEBPACK_IMPORTED_MODULE_1__.z.union([\n            zod__WEBPACK_IMPORTED_MODULE_1__.z.boolean(),\n            zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n        ]).transform((val)=>typeof val === \"string\" ? val === \"是\" : val),\n        recommendedCombination: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional()\n    })).transform((dishes)=>dishes.filter((dish)=>typeof dish === \"object\") // 过滤掉非对象项\n    )\n});\n// 生成 JWT token 的函数\nasync function generateToken(apiKey) {\n    const [id, secret] = apiKey.split(\".\");\n    if (!id || !secret) {\n        throw new Error(\"Invalid API key format\");\n    }\n    const timestamp = Math.floor(Date.now() / 1000);\n    const payload = {\n        api_key: id,\n        exp: timestamp + 3600,\n        timestamp\n    };\n    const header = {\n        alg: \"HS256\",\n        sign_type: \"SIGN\"\n    };\n    return new Promise((resolve, reject)=>{\n        const jwt = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/.pnpm/jsonwebtoken@9.0.2/node_modules/jsonwebtoken/index.js\");\n        jwt.sign(payload, secret, {\n            algorithm: \"HS256\",\n            header\n        }, (err, token)=>{\n            if (err) reject(err);\n            else resolve(token);\n        });\n    });\n}\nasync function POST(req) {\n    try {\n        if (!ZHIPU_API_KEY) {\n            throw new Error(\"API key not configured\");\n        }\n        const formData = await req.formData();\n        const file = formData.get(\"file\");\n        if (!file) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"请上传菜单图片\"\n            }, {\n                status: 400\n            });\n        }\n        const bytes = await file.arrayBuffer();\n        const buffer = Buffer.from(bytes);\n        const base64Image = buffer.toString(\"base64\");\n        // 生成token\n        const token = await generateToken(ZHIPU_API_KEY);\n        console.log(\"Token generated:\", token.substring(0, 20) + \"...\");\n        // 调用智谱AI API\n        const response = await fetch(API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                model: \"glm-4v\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: `请仔细分析这张菜单图片，选取最多8个主要菜品进行分析，对每个菜品提取以下信息：\n\n- 菜品名称 (name)：原始菜名\n- 价格 (price)：保持原始价格格式\n- 描述 (description)：用20-40字简要描述菜品的特点、口感和烹饪方法\n- 主要食材 (mainIngredient)：列出2-3种主要食材\n- 菜系类型 (cuisineType)：如川菜、粤菜等\n- 辣度等级 (spicinessLevel)：分为不辣、微辣、中辣、特辣\n- 是否为招牌菜 (isSignatureDish)：根据菜单标注或菜品特点，用\"是\"或\"否\"表示\n- 推荐搭配 (recommendedCombination)：建议搭配的其他菜品或饮品，如果没有明显搭配则返回空字符串\n\n请以JSON格式返回，确保每个菜品的信息完整，格式如下：\n{\n  \"dishes\": [\n    {\n      \"name\": \"菜品名称\",\n      \"price\": \"价格\",\n      \"description\": \"精炖文火慢煨，肉质鲜嫩，汤汁浓郁，配以特制酱料，口感层次丰富。\",\n      \"mainIngredient\": \"猪肉、竹笋、香菇\",\n      \"cuisineType\": \"川菜\",\n      \"spicinessLevel\": \"中辣\",\n      \"isSignatureDish\": \"是\",\n      \"recommendedCombination\": \"配以米饭或馒头\"\n    }\n  ]\n}\n\n注意：\n1. 描��要具体且生动，突出菜品特色\n2. 每个字段都必须填写，没有相关信息时使用合理的推测\n3. 确保返回的是标准JSON格式\n4. 所有文本使用中文`\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: `data:${file.type};base64,${base64Image}`\n                                }\n                            }\n                        ]\n                    }\n                ],\n                temperature: 0.7,\n                top_p: 0.7,\n                response_format: {\n                    type: \"json_object\"\n                }\n            })\n        });\n        console.log(\"Response status:\", response.status);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"API Error Response:\", errorText);\n            throw new Error(`API request failed: ${response.status} - ${errorText}`);\n        }\n        const responseText = await response.text();\n        console.log(\"Raw API Response:\", responseText);\n        if (!responseText) {\n            throw new Error(\"Empty response from API\");\n        }\n        const result = JSON.parse(responseText);\n        let content = result.choices?.[0]?.message?.content;\n        // 处理被截断的 JSON\n        if (content) {\n            try {\n                // 尝试修复被截断的 JSON\n                if (!content.endsWith(\"}]}\")) {\n                    // 找到最后一个完整的菜品对象\n                    const lastValidBrace = content.lastIndexOf(\"},\");\n                    if (lastValidBrace !== -1) {\n                        content = content.substring(0, lastValidBrace + 1) + \"]}\";\n                    }\n                }\n                const contentData = typeof content === \"string\" ? JSON.parse(content) : content;\n                // 只保留前8个菜品\n                if (contentData.dishes && Array.isArray(contentData.dishes)) {\n                    contentData.dishes = contentData.dishes.filter((dish)=>typeof dish === \"object\" && dish !== null).slice(0, 8);\n                }\n                console.log(\"Processed content data:\", contentData);\n                const parsedContent = menuAnalysisSchema.parse(contentData);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: true,\n                    data: parsedContent\n                });\n            } catch (parseError) {\n                console.error(\"Parse error:\", parseError);\n                console.error(\"Content that failed to parse:\", content);\n                throw new Error(\"解析返回数据失败\");\n            }\n        } else {\n            throw new Error(\"未能获取到分析结果\");\n        }\n    } catch (error) {\n        console.error(\"分析菜单时出错:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error instanceof Error ? error.message : \"菜单分析失败\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO1lBQUVuQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9hcGkvYW5hbHl6ZS1tZW51L3JvdXRlLnRzP2FiZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuXG5jb25zdCBaSElQVV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuWkhJUFVfQVBJX0tFWTtcbmNvbnN0IEFQSV9VUkwgPSAnaHR0cHM6Ly9vcGVuLmJpZ21vZGVsLmNuL2FwaS9wYWFzL3Y0L2NoYXQvY29tcGxldGlvbnMnO1xuXG4vLyDlrprkuYnoj5zlk4FzY2hlbWFcbmNvbnN0IG1lbnVBbmFseXNpc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgZGlzaGVzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIHByaWNlOiB6LnN0cmluZygpLFxuICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLFxuICAgIG1haW5JbmdyZWRpZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY3Vpc2luZVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzcGljaW5lc3NMZXZlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGlzU2lnbmF0dXJlRGlzaDogei51bmlvbihbei5ib29sZWFuKCksIHouc3RyaW5nKCldKS50cmFuc2Zvcm0odmFsID0+IFxuICAgICAgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyB2YWwgPT09ICfmmK8nIDogdmFsXG4gICAgKSxcbiAgICByZWNvbW1lbmRlZENvbWJpbmF0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIH0pKS50cmFuc2Zvcm0oZGlzaGVzID0+IFxuICAgIGRpc2hlcy5maWx0ZXIoZGlzaCA9PiB0eXBlb2YgZGlzaCA9PT0gJ29iamVjdCcpICAvLyDov4fmu6TmjonpnZ7lr7nosaHpoblcbiAgKVxufSk7XG5cbi8vIOeUn+aIkCBKV1QgdG9rZW4g55qE5Ye95pWwXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKGFwaUtleTogc3RyaW5nKSB7XG4gIGNvbnN0IFtpZCwgc2VjcmV0XSA9IGFwaUtleS5zcGxpdCgnLicpO1xuICBcbiAgaWYgKCFpZCB8fCAhc2VjcmV0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEFQSSBrZXkgZm9ybWF0Jyk7XG4gIH1cblxuICBjb25zdCB0aW1lc3RhbXAgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcbiAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICBhcGlfa2V5OiBpZCxcbiAgICBleHA6IHRpbWVzdGFtcCArIDM2MDAsXG4gICAgdGltZXN0YW1wLFxuICB9O1xuXG4gIGNvbnN0IGhlYWRlciA9IHtcbiAgICBhbGc6ICdIUzI1NicsXG4gICAgc2lnbl90eXBlOiAnU0lHTidcbiAgfTtcblxuICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG4gICAgand0LnNpZ24oXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2VjcmV0LFxuICAgICAgeyBcbiAgICAgICAgYWxnb3JpdGhtOiAnSFMyNTYnLFxuICAgICAgICBoZWFkZXJcbiAgICAgIH0sXG4gICAgICAoZXJyOiBhbnksIHRva2VuOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgIGVsc2UgcmVzb2x2ZSh0b2tlbik7XG4gICAgICB9XG4gICAgKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBpZiAoIVpISVBVX0FQSV9LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGtleSBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxLmZvcm1EYXRhKCk7XG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGU7XG5cbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ+ivt+S4iuS8oOiPnOWNleWbvueJhycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcbiAgICBjb25zdCBiYXNlNjRJbWFnZSA9IGJ1ZmZlci50b1N0cmluZygnYmFzZTY0Jyk7XG5cbiAgICAvLyDnlJ/miJB0b2tlblxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZ2VuZXJhdGVUb2tlbihaSElQVV9BUElfS0VZKTtcbiAgICBjb25zb2xlLmxvZygnVG9rZW4gZ2VuZXJhdGVkOicsIHRva2VuLnN1YnN0cmluZygwLCAyMCkgKyAnLi4uJyk7XG5cbiAgICAvLyDosIPnlKjmmbrosLFBSSBBUElcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEFQSV9VUkwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6ICdnbG0tNHYnLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBg6K+35LuU57uG5YiG5p6Q6L+Z5byg6I+c5Y2V5Zu+54mH77yM6YCJ5Y+W5pyA5aSaOOS4quS4u+imgeiPnOWTgei/m+ihjOWIhuaekO+8jOWvueavj+S4quiPnOWTgeaPkOWPluS7peS4i+S/oeaBr++8mlxuXG4tIOiPnOWTgeWQjeensCAobmFtZSnvvJrljp/lp4voj5zlkI1cbi0g5Lu35qC8IChwcmljZSnvvJrkv53mjIHljp/lp4vku7fmoLzmoLzlvI9cbi0g5o+P6L+wIChkZXNjcmlwdGlvbinvvJrnlKgyMC00MOWtl+eugOimgeaPj+i/sOiPnOWTgeeahOeJueeCueOAgeWPo+aEn+WSjOeDuemlquaWueazlVxuLSDkuLvopoHpo5/mnZAgKG1haW5JbmdyZWRpZW50Ke+8muWIl+WHujItM+enjeS4u+imgemjn+adkFxuLSDoj5zns7vnsbvlnosgKGN1aXNpbmVUeXBlKe+8muWmguW3neiPnOOAgeeypOiPnOetiVxuLSDovqPluqbnrYnnuqcgKHNwaWNpbmVzc0xldmVsKe+8muWIhuS4uuS4jei+o+OAgeW+rui+o+OAgeS4rei+o+OAgeeJuei+o1xuLSDmmK/lkKbkuLrmi5vniYzoj5wgKGlzU2lnbmF0dXJlRGlzaCnvvJrmoLnmja7oj5zljZXmoIfms6jmiJboj5zlk4HnibnngrnvvIznlKhcIuaYr1wi5oiWXCLlkKZcIuihqOekulxuLSDmjqjojZDmkK3phY0gKHJlY29tbWVuZGVkQ29tYmluYXRpb24p77ya5bu66K6u5pCt6YWN55qE5YW25LuW6I+c5ZOB5oiW6aWu5ZOB77yM5aaC5p6c5rKh5pyJ5piO5pi+5pCt6YWN5YiZ6L+U5Zue56m65a2X56ym5LiyXG5cbuivt+S7pUpTT07moLzlvI/ov5Tlm57vvIznoa7kv53mr4/kuKroj5zlk4HnmoTkv6Hmga/lrozmlbTvvIzmoLzlvI/lpoLkuIvvvJpcbntcbiAgXCJkaXNoZXNcIjogW1xuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIuiPnOWTgeWQjeensFwiLFxuICAgICAgXCJwcmljZVwiOiBcIuS7t+agvFwiLFxuICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIueyvueCluaWh+eBq+aFoueFqO+8jOiCiei0qOmynOWrqe+8jOaxpOaxgea1k+mDge+8jOmFjeS7peeJueWItumFseaWme+8jOWPo+aEn+WxguasoeS4sOWvjOOAglwiLFxuICAgICAgXCJtYWluSW5ncmVkaWVudFwiOiBcIueMquiCieOAgeerueesi+OAgemmmeiPh1wiLFxuICAgICAgXCJjdWlzaW5lVHlwZVwiOiBcIuW3neiPnFwiLFxuICAgICAgXCJzcGljaW5lc3NMZXZlbFwiOiBcIuS4rei+o1wiLFxuICAgICAgXCJpc1NpZ25hdHVyZURpc2hcIjogXCLmmK9cIixcbiAgICAgIFwicmVjb21tZW5kZWRDb21iaW5hdGlvblwiOiBcIumFjeS7peexs+mlreaIlummkuWktFwiXG4gICAgfVxuICBdXG59XG5cbuazqOaEj++8mlxuMS4g5o+P77+977+96KaB5YW35L2T5LiU55Sf5Yqo77yM56qB5Ye66I+c5ZOB54m56ImyXG4yLiDmr4/kuKrlrZfmrrXpg73lv4XpobvloavlhpnvvIzmsqHmnInnm7jlhbPkv6Hmga/ml7bkvb/nlKjlkIjnkIbnmoTmjqjmtYtcbjMuIOehruS/nei/lOWbnueahOaYr+agh+WHhkpTT07moLzlvI9cbjQuIOaJgOacieaWh+acrOS9v+eUqOS4reaWh2BcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZV91cmwnLFxuICAgICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgICAgdXJsOiBgZGF0YToke2ZpbGUudHlwZX07YmFzZTY0LCR7YmFzZTY0SW1hZ2V9YFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgICAgdG9wX3A6IDAuNyxcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9XG4gICAgICB9KVxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ1Jlc3BvbnNlIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yIFJlc3BvbnNlOicsIGVycm9yVGV4dCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSByZXF1ZXN0IGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIGNvbnNvbGUubG9nKCdSYXcgQVBJIFJlc3BvbnNlOicsIHJlc3BvbnNlVGV4dCk7XG5cbiAgICBpZiAoIXJlc3BvbnNlVGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbXB0eSByZXNwb25zZSBmcm9tIEFQSScpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcbiAgICBsZXQgY29udGVudCA9IHJlc3VsdC5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XG4gICAgXG4gICAgLy8g5aSE55CG6KKr5oiq5pat55qEIEpTT05cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g5bCd6K+V5L+u5aSN6KKr5oiq5pat55qEIEpTT05cbiAgICAgICAgaWYgKCFjb250ZW50LmVuZHNXaXRoKCd9XX0nKSkge1xuICAgICAgICAgIC8vIOaJvuWIsOacgOWQjuS4gOS4quWujOaVtOeahOiPnOWTgeWvueixoVxuICAgICAgICAgIGNvbnN0IGxhc3RWYWxpZEJyYWNlID0gY29udGVudC5sYXN0SW5kZXhPZignfSwnKTtcbiAgICAgICAgICBpZiAobGFzdFZhbGlkQnJhY2UgIT09IC0xKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoMCwgbGFzdFZhbGlkQnJhY2UgKyAxKSArICddfSc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb250ZW50RGF0YSA9IHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoY29udGVudCkgOiBjb250ZW50O1xuICAgICAgICBcbiAgICAgICAgLy8g5Y+q5L+d55WZ5YmNOOS4quiPnOWTgVxuICAgICAgICBpZiAoY29udGVudERhdGEuZGlzaGVzICYmIEFycmF5LmlzQXJyYXkoY29udGVudERhdGEuZGlzaGVzKSkge1xuICAgICAgICAgIGNvbnRlbnREYXRhLmRpc2hlcyA9IGNvbnRlbnREYXRhLmRpc2hlc1xuICAgICAgICAgICAgLmZpbHRlcihkaXNoID0+IHR5cGVvZiBkaXNoID09PSAnb2JqZWN0JyAmJiBkaXNoICE9PSBudWxsKVxuICAgICAgICAgICAgLnNsaWNlKDAsIDgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2VkIGNvbnRlbnQgZGF0YTonLCBjb250ZW50RGF0YSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbnRlbnQgPSBtZW51QW5hbHlzaXNTY2hlbWEucGFyc2UoY29udGVudERhdGEpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHBhcnNlZENvbnRlbnRcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BhcnNlIGVycm9yOicsIHBhcnNlRXJyb3IpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDb250ZW50IHRoYXQgZmFpbGVkIHRvIHBhcnNlOicsIGNvbnRlbnQpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ino+aekOi/lOWbnuaVsOaNruWksei0pScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+acquiDveiOt+WPluWIsOWIhuaekOe7k+aenCcpO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+WIhuaekOiPnOWNleaXtuWHuumUmTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn6I+c5Y2V5YiG5p6Q5aSx6LSlJ1xuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ6IiwiWkhJUFVfQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJBUElfVVJMIiwibWVudUFuYWx5c2lzU2NoZW1hIiwib2JqZWN0IiwiZGlzaGVzIiwiYXJyYXkiLCJuYW1lIiwic3RyaW5nIiwicHJpY2UiLCJkZXNjcmlwdGlvbiIsIm1haW5JbmdyZWRpZW50Iiwib3B0aW9uYWwiLCJjdWlzaW5lVHlwZSIsInNwaWNpbmVzc0xldmVsIiwiaXNTaWduYXR1cmVEaXNoIiwidW5pb24iLCJib29sZWFuIiwidHJhbnNmb3JtIiwidmFsIiwicmVjb21tZW5kZWRDb21iaW5hdGlvbiIsImZpbHRlciIsImRpc2giLCJnZW5lcmF0ZVRva2VuIiwiYXBpS2V5IiwiaWQiLCJzZWNyZXQiLCJzcGxpdCIsIkVycm9yIiwidGltZXN0YW1wIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsInBheWxvYWQiLCJhcGlfa2V5IiwiZXhwIiwiaGVhZGVyIiwiYWxnIiwic2lnbl90eXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJqd3QiLCJyZXF1aXJlIiwic2lnbiIsImFsZ29yaXRobSIsImVyciIsInRva2VuIiwiUE9TVCIsInJlcSIsImZvcm1EYXRhIiwiZmlsZSIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwiYmFzZTY0SW1hZ2UiLCJ0b1N0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJzdWJzdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidHlwZSIsInRleHQiLCJpbWFnZV91cmwiLCJ1cmwiLCJ0ZW1wZXJhdHVyZSIsInRvcF9wIiwicmVzcG9uc2VfZm9ybWF0Iiwib2siLCJlcnJvclRleHQiLCJyZXNwb25zZVRleHQiLCJyZXN1bHQiLCJwYXJzZSIsImNob2ljZXMiLCJtZXNzYWdlIiwiZW5kc1dpdGgiLCJsYXN0VmFsaWRCcmFjZSIsImxhc3RJbmRleE9mIiwiY29udGVudERhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJzbGljZSIsInBhcnNlZENvbnRlbnQiLCJzdWNjZXNzIiwiZGF0YSIsInBhcnNlRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze-menu/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/semver@7.6.3","vendor-chunks/jsonwebtoken@9.0.2","vendor-chunks/lodash.includes@4.3.0","vendor-chunks/jws@3.2.2","vendor-chunks/lodash.once@4.1.1","vendor-chunks/jwa@1.4.1","vendor-chunks/lodash.isinteger@4.0.4","vendor-chunks/ecdsa-sig-formatter@1.0.11","vendor-chunks/lodash.isplainobject@4.0.6","vendor-chunks/ms@2.1.3","vendor-chunks/lodash.isstring@4.0.1","vendor-chunks/lodash.isnumber@3.0.3","vendor-chunks/lodash.isboolean@3.0.3","vendor-chunks/safe-buffer@5.2.1","vendor-chunks/buffer-equal-constant-time@1.0.1","vendor-chunks/zod@3.23.8"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@13.5.7_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze-menu%2Froute&page=%2Fapi%2Fanalyze-menu%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze-menu%2Froute.ts&appDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CIntel%5CDesktop%5CDase2025%5C4_OpenTeacherAssistant%5Ccursor%5Cai-menu-generator&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();